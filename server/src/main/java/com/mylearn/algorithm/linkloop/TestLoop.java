package com.mylearn.algorithm.linkloop;

/**
 * Created by IntelliJ IDEA.
 * User: yingkh
 * Date: 13-4-23
 * Time: ????11:30
 * CopyRight:360buy
 * Descrption:  ????t????????§Ý?
 * To change this template use File | Settings | File Templates.
 */
public class TestLoop {

    public static boolean isExistsLoop(LinkNode linkNode) {
        boolean flag = false;
        Node slow = linkNode.getHead(); //?????
        Node fast = linkNode.getHead(); //?????
        int s = 0;
        while (fast != null && fast.getNext() != null) {
            slow = slow.getNext();      //???????????
            fast = fast.getNext().getNext();     //???????????
            s++;
            //??}???????????????????????
            if (slow == fast) {
                System.out.println("??????=" + slow.getData());
                flag = true;
                break;
            }
        }

        //??????????????????????????slow????????????????}???????????????
        Node slow2 = linkNode.getHead();
        int count = 0;
        int r = 0;
        while (slow != slow2) {
            slow = slow.getNext();
            slow2 = slow2.getNext();
            fast = fast.getNext().getNext();
            count++;
            r++;
        }
        //??????????fast??slow????????§Þ‚B???????????????????????????s??????????r???????????
        while (slow != fast) {
            slow = slow.getNext();
            fast = fast.getNext().getNext();
            r++;
        }

        System.out.println("??????=" + slow.getData());
        System.out.println("t?????=" + linkNode.getSize());
        System.out.println("t??head????????????=" + count);
        System.out.println("????????=" + r);
        System.out.println("??t???????=" + (s + count));

        return flag;
    }


    public static void main(String args[]) {
        LinkNode linkNode = new LinkNode();
        Node target = new Node(null, "a"); //?????????
        for (int i = 0; i < 10; i++) {
            //???????10??????????????????
            if (i == 3) {
                linkNode.add(target);
            } else {
                linkNode.add(new Node(null, i + ""));
            }
        }
        linkNode.add(target);  //????????????????¦Ã??

        //????????t????????14
        for (int i = 0; i < 3; i++) {
            linkNode.add(new Node(null, (100 - i) + ""));
        }
        /*    Node head = linkNode.getHead();
        while(head !=null && head.getNext()!=null) {
            System.out.println(head.getData());
            head = head.getNext();
        }*/

        System.out.println(TestLoop.isExistsLoop(linkNode));

    }

}

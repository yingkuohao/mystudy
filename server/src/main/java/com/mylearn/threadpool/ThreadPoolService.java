package com.mylearn.threadpool;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by IntelliJ IDEA.
 * User: yingkh
 * Date: 13-3-20
 * Time: ????9:54
 * CopyRight:360buy
 * Descrption:   ?????????
 *
 * ?????????????????????????????????????????????????????§»????????????§µ?????????start????????
 * ??????????????????????????§³?
 * To change this template use File | Settings | File Templates.
 */
public class ThreadPoolService {

    public static final int THREAD_COUNT = 5; //????????,spring??????????????§³??????

    private TaskQueue queue = new TaskQueue(); // ???????

    private Status stats = Status.NEW;   //?????

    public enum Status {      //??????????????
        NEW,
        RUNNING,
        STOP
    }


    private List<Thread> threads = new ArrayList<Thread>(); //??????

    //??????????????????????
    public ThreadPoolService() {
        for(int i = 0; i < THREAD_COUNT; i++) {
            WorkThread t = new WorkThread(this);
            threads.add(new Thread(t));
        }
    }

    /**
     * ???????4???????????
     */
    public void start() {
        this.stats = Status.RUNNING;

         for(int i = 0 ; i < THREAD_COUNT; i++) {
             threads.get(i).start();
         }
    }

    public void stop() {
        this.stats = Status.STOP;
    }


    public boolean isRunning() {
        return  stats == Status.RUNNING;
    }


    /**
     * ???????????????
     * @param task
     */
    public void runTask(Task task) {
        queue.addTask(task);
    }

    protected TaskQueue getTaskQueue() {
        return queue;
    }
}
